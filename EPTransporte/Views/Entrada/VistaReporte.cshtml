@model EPTransporte.Models.reporteFechas

@{
    ViewBag.Title = "VistaReporte";
}

<h2 class="page-title">Reporte de entrada</h2>



<!-- Formulario de filtrado por fecha -->
<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0">Filtrar Reporte</h4>
    </div>
    <div class="card-body">
        @using (Html.BeginForm("VistaReporte", "Entrada", FormMethod.Post))
        {
        @Html.AntiForgeryToken()
        <div class="form-section">
            <div class="form-group row mb-3">
                <label class="col-md-2 col-form-label">Fecha de Inicio</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.FechaInicio, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date", id = "fechaInicio" })
                    @Html.ValidationMessageFor(model => model.FechaInicio, "", new { @class = "text-danger" })
                </div>

                <label class="col-md-2 col-form-label">Fecha Final</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(model => model.FechaFinal, "{0:yyyy-MM-dd}", new { @class = "form-control", type = "date", id = "fechaFinal" })
                    @Html.ValidationMessageFor(model => model.FechaFinal, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-filter"></i> Filtrar Reporte
                </button>
            </div>
        </div>
        }
    </div>
</div>

<!-- Tabla con resultados del reporte -->
<div class="card">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0">Resultados del Reporte</h4>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover" id="Articulos">
                <thead>
                    <tr>
                        <th>No.Entrada</th>
                        <th>Sucursal</th>
                        <th>Transportista</th>
                        <th>Operador</th>
                        <th>Económico</th>
                        <th>Fecha Entrada</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in ViewData["EntradaReporte"] as List<EPTransporte.Models.DatosEntradaReporte>)
                    {
                    <tr>
                        <td>@item.IdPaseEntrada</td>
                        <td>@item.Sucursal</td>
                        <td>@item.Transportista</td>
                        <td>@item.Operador</td>
                        <td>@item.Economico</td>
                        <td>@item.FechaEntrada</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Botón para exportar archivo -->
@if (ViewBag.Fecha1 != null)
{
    var myFecha1 = (string)ViewBag.Fecha1;
    var myFecha2 = (string)ViewBag.Fecha2;
<div class="text-end mt-3">
    <a href="@Url.Action("Export", new { lafecha1 = myFecha1, fecha2 = myFecha2 })" class="btn btn-success">
        <i class="fas fa-file-export"></i> Exportar Archivo
    </a>
</div>
}

@section Scripts {
    <script>
    </script>
}